<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/material_red.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/MensagensSwal/mensagensSwal.css">
    <link rel="stylesheet" href="css/Modal/Orcamento.css">
    <link rel="stylesheet" href="css/Roots/Roots.css">
    <link href="https://fonts.googleapis.com/css2?family=Abel&display=swap" rel="stylesheet">
    <title>OrÃ§amento</title>
    
</head>
<body data-modulo="Orcamentos">

<div id="CadModal" class="modal">
    <div class="modal-content">
        <div class="Close" id="Close"><button onclick="fecharModal()" id="Close">X</button></div>


        <div id ="form-orcamento">
        
        <form id="form" name="form" autocomplete="off"><!-- data-action="http://localhost:3000/salvarOrcamento"> -->
            
                
            <div class="title">
                <h2>Orçamento</h2>
            </div>

                <div class="Norcamento">
                    <div class="form2" >
                        <input type="text" class="uppercase" class="preenchido" id="Status"  value="A" name="Status" maxlength="1" pattern="^[aAfF]$"
                            title="A = Aberto | F = Fechado"   required spellcheck="false">
                        <label for="Status">Status  (A/F)</label>
                    </div>
                    <div class="form">
                        <input type="text" id="idNumOrcamento" name="idNumOrcamento" spellcheck="false">
                        <label for="idNumOrcamento">N° do Orçamento</label>
                    </div>
                </div>


                <div class="Selects">
                    <div class="select">
                        <label for="idCliente">Cliente:</label>
                        <select class="idCliente" required spellcheck="false"></select>
                    </div>
                    <div class="select">
                        <label for="idEvento">Evento:</label>
                        <select class="idEvento" required spellcheck="false"></select>
                    </div>
                        <div class="select2">
                            <label for="idMontagem">Local Montagem:</label>
                            <select class="idMontagem"  onchange="atualizarUFOrc(this)"></select>
                        <div class="form3">
                            <input type="text" class="ufmontagem" id="ufmontagem" name="ufmontagem" required spellcheck="false">
                            <label  for="ufmontagem">UF</label>
                        </div>
                        <div class="checkbox-wrapper-33 checkbox-coluna" oninput="configurarInfraCheckbox()">
                            <p class="checkbox__textwrapper"> infra.</p>
                            <label class="checkbox">
                                <input class="checkbox__trigger visuallyhidden" type="checkbox" id="ativo" name="ativo">
                                <span class="checkbox__symbol">
                                    <svg aria-hidden="true" class="icon-checkbox" width="28px" height="28px" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M4 14l8 7L24 7"></path>
                                    </svg>
                                </span>
                            </label>
                        </div>
                    </div>
                </div>
        
        
        
        
            
                <div class="periodoMontagem">
                
                    <div id="blocoInfra" class=" inativo-esquerda"  style="display: none;">
                        <div class="dtInfra">
                            <label class="miniTitle">Montagem de Infra.</label>
                            <!-- <div class="De">
                                <label  for="periodoInfra"> De:</label>
                                <input type="date" id="dtIniInfra" >
                            </div>
                            <div class="ate">
                                <label  for="dtFimMarcacao">Até:</label>
                                <input type="date" id="dtFimInfra">
                            </div> -->
                            <input type="text" required readonly placeholder="Clique para Selecionar" onclick="inicializarFlatpickrPeriodos(this)" >

                        </div>
                    </div>

                    <div class="dtMarcacao">
                        <label class="miniTitle">Período de Marcação</label>
                        <!-- <div class="De">
                            <label  for="periodoMarcacao"> De:</label>
                            <input type="date" id="dtIniMarcacao" name="dtIniMarcacao">
                        </div> 
                        <div class="ate">
                            <label for="dtFimMarcacao">Até:</label>
                            <input type="date" id="dtFimMarcacao" name="dtFimMarcacao">
                        </div> -->
                        <input type="text" required readonly placeholder="Clique para Selecionar" onclick="inicializarFlatpickrPeriodos(this)" >
                        
                    </div>
                    <div class="inicioMontagem">
                        <label class="miniTitle">Período de Montagem</label>
                        <!-- <div class="De">
                            <label class="miniTitle" for="periodoMontagem"> De:</label>
                            <input type="date" id="dtInicioMontagem" name="dtInicioMontagem">
                        </div>
                        <div class="ate">
                            <label class="miniTitle" for="dtFimMontagem">Até:</label>
                            <input type="date" id="dtFimMontagem" name="dtFimMontagem">
                        </div> -->
                        <input type="text" required readonly placeholder="Clique para Selecionar" onclick="inicializarFlatpickrPeriodos(this)" >
                        
                    </div>
                    <div class="Realizacao">
                        <label class="miniTitle">Período de Realização</label>
                        <!-- <div class="De">
                            <label class="miniTitle" for="periodoRealizacao"> De:</label>
                            <input type="date" id="dtInicioRealizacao" name="dtInicioRealizacao">
                        </div>
                        <div class="ate">
                            <label class="miniTitle" for="dtFimRealizacao">Até:</label>
                            <input type="date" id="dtFimRealizacao" name="dtFimRealizacao">
                        </div> -->
                        <input type="text" required readonly placeholder="Clique para Selecionar" onclick="inicializarFlatpickrPeriodos(this)" >
                        
                    </div>
                
                    <div class="dtDesmontagem">
                        <label class="miniTitle">Período de Desmontagem</label>
                        <!-- <div class="De">
                            <label class="miniTitle" for="periodoDesmontagem"> De:</label>
                            <input type="date" id="dtIniDesmontagem" name="dtIniDesmontagem">
                        </div>
                        <div class="ate">
                            <label class="miniTitle" for="dtFimDesmontagem">Até:</label>
                            <input type="date" id="dtFimDesmontagem" name="dtFimDesmontagem">
                        </div> -->
                        <input type="text" required readonly placeholder="Clique para Selecionar" onclick="inicializarFlatpickrPeriodos(this)" >
                    </div>

                    <div id="blocoInfra2" class="inativo-direita" style="display: none;">
                        <div class="dtInfra">
                            <label class="miniTitle">Desmontagem de Infra.</label>
                            <!-- <div class="De">
                                <label  for="periodoInfra"> De:</label>
                                <input type="date" id="dtIniInfra" >
                            </div>
                            <div class="ate">
                                <label  for="dtFimMarcacao">Até:</label>
                                <input type="date" id="dtFimInfra">
                            </div> -->
                        <input type="text" required readonly placeholder="Clique para Selecionar" onclick="inicializarFlatpickrPeriodos(this)" >

                        </div>
                    </div> 
                </div>
            

            
                <div class = 'Selects'>
                
                    <div class="select">
                        <label for="idFuncao">Função:</label>
                        <select class="idFuncao" onchange="resetarOutrosSelectsOrc(this)"></select>
                    </div>
                    <div class="select">
                        <label for="idEquipamento">Equipamento:</label>
                        <select class="idEquipamento" onchange="resetarOutrosSelectsOrc(this)"></select>
                    </div>
                    <div class="select">
                        <label for="idSuprimento">Suprimento:</label>
                        <select class="idSuprimento" onchange="resetarOutrosSelectsOrc(this)"></select>
                    </div>
                </div>
                
                <div class="table">
                    <table id="tabela" >
                        <thead>
                            <tr>
                                <th>P/ Proposta</th>
                                <th>Categoria</th>
                                <th>Qtd Itens</th>
                                <th>Produto</th>
                                <th>Qtd Dias</th>
                                <th>Periodo das diarias </th>
                                <th>Desconto</th>
                                <th>Acrescimo</th>
                                <th>VlrDiaria</th>
                                <th>Tot Venda Diaria</th>
                                <th>CtoDiaria</th>
                                <th>Tot Custo Diaria</th>
                                <th>AjdCusto/alimentação</th>
                                <th>AjdCusto/transporte</th>
                                <th>TotAjdCusto</th>
                                <th class="extraColuna" style="display: none;">Hospedagem</th>
                                <th class="extraColuna" style="display: none;">Transporte</th>
                                <!-- incluir campos hospegadem e transporte se for local montagem fora de SP -->
                                <th>TotGeral</th>
                                <th>Ação</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="Proposta"><div class="checkbox-wrapper-33" style="margin-top: 40px;"><label class="checkbox"><input class="checkbox__trigger visuallyhidden" type="checkbox" /><span class="checkbox__symbol"><svg aria-hidden="true" class="icon-checkbox"      width="28px" height="28px" viewBox="0 0 28 28" version="1" xmlns="http://www.w3.org/2000/svg"><path d="M4 14l8 7L24 7"></path></svg></span><p class="checkbox__textwrapper"></p></label></div></td>
                                <td class="Categoria"></td>
                                <td class="qtdPessoas"><div class="add-less"><input type="number" readonly class="qtdPessoas" min="0" value="0" oninput="calcularTotalOrc()"><div class="Bt"><button class="increment">+</button><button class="decrement">-</button></div></div></td>
                                <td class="produto"></td>
                                <td class="qtdDias"><div class="add-less"><input type="number" readonly class="qtdDias" min="0" value="0" oninput="calcularTotalOrc()"><!--  <div class="Bt"><button class="increment">+</button><button class="decrement">-</button></div></div>--></td>

                                <td class="Periodo"><div class="flatpickr" id="seletorData"><input type="text" data-input required readonly placeholder="Clique para Selecionar" oninput="atualizarQtdDias(this)" onclick="inicializarFlatpickr(this)"></div></td>
                                <!-- <td class="Periodo"><div class="Acres-Desc"><p>de:<input type="date" class="data-inicio" oninput="atualizarQtdDias(this)"></p><p>até<input type="date" class="data-fim" oninput="atualizarQtdDias(this)"></p></div></td> -->

                                
                                <td class="desconto Moeda"><div class="Acres-Desc"><input type="text" class="ValorInteiros" value="R$ 0,00" id=""><input type="text" class="valorPerCent" value="0%" id=""></div></td>
                                <td class="Acrescimo Moeda"><div class="Acres-Desc"><input type="text" class="ValorInteiros" value="R$ 0,00" id=""><input type="text" class="valorPerCent" value="0%" id=""></div></td>
                                <td class="vlrVenda Moeda"></td>
                                <td class="totVdaDiaria Moeda"></td>
                                <td class="vlrCusto Moeda"></td>
                                <td class="totCtoDiaria Moeda"></td>
                                <td class="ajdCusto Moeda"><div class="Acres-Desc"><select id="tpAjdCusto"><option value="select" selected disabled>Alimentação</option><option value="Almoco">Almoço</option><option value="janta">jantar</option><option value="2alimentacao">Almoço + jantar</option></select></div><br><div class="valorbanco"></div></td>
                                <td class="ajdCusto Moeda"><div class="Acres-Desc"><select id="tpAjdCusto"><option value="select" selected disabled>Veiculo </option><option value="Publico">Publico</option><option value="alugado">alugado</option><option value="Proprio">Proprio</option></select></div><br><div class="valorbanco"></div></td>
                                <td class="totAjdCusto Moeda">0</td>
                                <td class="extraCampo" style="display: none;">
                                    <input type="text" class="hospedagem" min="0" step="0.01" oninput="calcularTotaisOrc()">
                                </td>
                                <td class="extraCampo" style="display: none;">
                                    <input type="text" class="transporte" min="0" step="0.01" oninput="calcularTotaisOrc()">
                                </td>
                                <td class="totGeral">0</td>
                                <td><div class="Acao"><button class="deleteBtn" onclick="removerLinhaOrc(this)"><svg class="delete-svgIcon" viewBox="0 0 448 512"> <path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"></path></svg></button></div></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>
                <div class="addLinha"><button class="adicionar" id="adicionar" onclick="adicionarLinhaOrc()">Adicionar Linha</button></div>
            
                <div class = 'Selects'>
                    <div class="Observacoes">
                        <div class="Propostaobs1">
                            <div class="checkbox-wrapper-33" style="margin-top: 40px; margin-right: 5px;">
                                <label class="checkbox">
                                    <input class="checkbox__trigger visuallyhidden" type="checkbox" />
                                    <span class="checkbox__symbol">
                                        <svg aria-hidden="true" class="icon-checkbox" width="28px" height="28px" viewBox="0 0 28 28" version="1" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4 14l8 7L24 7"></path>
                                        </svg>
                                    </span>
                                    <p class="checkbox__textwrapper"></p>
                                </label>
                            </div>
                                <textarea class="PropostaobsTexto" name="Observacao" id="Observacao" placeholder="Observações sobre os Itens"></textarea>
                        </div>

                        <div class="Propostaobs2">
                            <div class="checkbox-wrapper-33">
                                <label class="checkbox">
                                    <input class="checkbox__trigger visuallyhidden" type="checkbox" />
                                    <span class="checkbox__symbol">
                                        <svg aria-hidden="true" class="icon-checkbox" width="28px" height="28px" viewBox="0 0 28 28" version="1" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4 14l8 7L24 7"></path>
                                        </svg>
                                    </span>
                                    <p class="checkbox__textwrapper"></p>
                                </label>
                            </div>
                                <textarea class="PropostaobsTexto" name="ObservacaoProposta" id="ObservacaoProposta" placeholder="Observações sobre a Proposta"></textarea>
                        </div>
                    </div>
                    <div>
                            <div class="form2">
                                <input type="text" class="Moeda preenchido" id="totalGeralVda" name="totalGeralVda" value=" R$ 0,00" required readonly style="font-size: 15px;" >
                                <label for="totalGeralVda">Total Geral Venda:</label>
                            </div>
                            <div class="form2">
                                <input type="text" class="Moeda preenchido" id="totalGeralCto" value=" R$ 0,00" name="totalGeralCto" required readonly style="font-size: 15px;" >
                                <label for="totalGeralCto">Total Geral Custo:</label>
                            </div>
                        
                       
                            <div class="form2">
                                <input type="text" class="Moeda preenchido" id="totalajdCusto" value=" R$ 0,00" required readonly style="font-size: 15px;" >
                                <label for="totalGeralCto">Total Ajuda De Custo:</label>
                            </div>
                    </div>

                    <div>
                        <div class="lucroTot">
                            <div class="form2">
                                <input type="text" id="Lucro" value=" R$ 0,00" class="preenchido" readonly style="font-size: 15px;">
                                <label for="Lucro"> Lucro: </label>
                            </div>
                            <div class="form3">
                                <input type="text"  id="perCent" class="preenchido" value="0%" name="perCent" required readonly style="font-size: 15px;">
                                <label for="perCent"> % </label>
                            </div>
                        </div>
                        <div class="lucroTot">
                            <div class="form2">
                                <input type="text" id="LucroReal"  class="preenchido" name="LucroReal" value=" R$ 0,00" required readonly style="font-size: 15px;">
                                <label for="LucroReal"> Lucro Real: </label>
                            </div>
                            <div class="form3">
                                <input type="text"  id="perCentReal" class="preenchido" value="0%" name="perCentReal" required readonly style="font-size: 15px;">
                                <label for="perCentReal"> % </label>
                            </div>
                        </div>
                    </div>

                    <div>
                        
                        <div class="form-2colunas">
                            <div class="form2">
                                <input type="text" value="R$ 0,00" id="Desconto" min="0" class="ValorInteiros preenchido" name="Desconto"  required  oninput="aplicarDescontoEAcrescimo(this)" style="font-size: 15px;" autocomplete="off">
                                <label for="Desconto">Desconto:</label>
                            </div>
                            <div class="form3">
                                <input type="text" value="0% " id="perCentDesc" min="0" class="valorPerCentDesc preenchido" name="perCentDesc"  oninput="aplicarDescontoEAcrescimo(this)"  required style="font-size: 15px;">
                            </div>
                        </div>
                            <div class="form-2colunas">
                                <div class="form2">
                                    <input type="text"  value="R$ 0,00" min="0" id="Acrescimo" class="ValorInteiros preenchido" name="Acrescimo"  required  oninput="aplicarDescontoEAcrescimo(this)" style="font-size: 15px;" autocomplete="off">
                                    <label for="Acrescimo">Acréscimo:</label>
                                </div>
                                <div class="form3">
                                <input type="text" value="0%" min="0" id="perCentAcresc"  class="valorPerCentAcresc preenchido" name="perCentAcresc"  oninput="aplicarDescontoEAcrescimo(this)" required style="font-size: 15px;">
                            </div>
                        </div>
                    

                        <div class="form2">
                            <input type="text" id="valorCliente" class="preenchido" name="valorCliente" readonly value="R$ 0,00" required style="font-size: 15px;">
                            <label for="valorCliente"> Valor do Cliente</label>
                        </div>
                    </div>  
            </div>

            </div>
            <div class="BTNs">
                <button class="pesquisar" onclick="pesquisarOrcamento()">Pesquisar</button>
                <button class="Proposta" id="Proposta" onclick="gerarPropostaPDF()">Gerar Proposta</button>
                <button class="Adicional" onclick="adicionarLinhaAdicional()"  style="display: none;">Adicional</button>
                <button class="fecharOrc" id="fecharOrc" onclick="fecharOrcamento()">Fechar Orçamento</button>
                <button class="salvar" id="btnSalvar" type="submit">Salvar Orçamento</button>
            </div>
        </form>
    </div>
</div>
<script src="js/Orcamento.js"defer></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt_br.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



</body>
</html>